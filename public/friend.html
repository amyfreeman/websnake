<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Test</title>
  </head>
	<body>
		<div>
			Start a new game:<br>
			<input type="button" value="Start a new game" onclick="startNewGame();"><br><br>
			Join an existing game:<br>
			<input type="text" id="gameId"><br>
			<input type="button" value="Join an existing game" onclick="joinGame();"><br><br>
			Send generic socket message:<br>
			<input type="text" id="message"><br>
			<input type="button" value="Send generic socket message" onclick="sendMessage();">
		</div>
		<canvas id="back">

		</canvas>
		<script src="./js/glue.js" type="text/javascript"></script>
		<script>
			var socket = glue();

      var canvas;
      var ctx;
			initCanvas();
			drawBackground();

			function initCanvas() {
        canvas = document.querySelector("#back");
        ctx = canvas.getContext("2d");
        ctx.canvas.width  = 200;
        ctx.canvas.height = 200;
      }

			function drawBackground() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, 200, 200);
			}
			
			function startNewGame(){
				var c = socket.channel('create');
				c.send('create');
			}

			function joinGame(){
				var gameId = document.getElementById('gameId').value;
				var c = socket.channel('join');
				c.send(gameId);
			}

			function sendMessage(){
				socket.send(document.getElementById('message').value);
			}

			socket.onMessage(function(data) {
        console.log(data);
    	});
		</script>
	</body>
</html>