<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test</title>
</head>
<body>
    <div id="page1">
        <p>Hello, Player</p>
        <div id="buttonbar">
            <button type="button" onclick="strangerClick()">Play Stranger</button>
            <button type="button" onclick="friendClick()">Play Friend</button>
        </div>
    </div>
    <div id="status">
    </div>
    <canvas id="back" style="border:1px solid"></canvas>
    <script src="./js/glue.js" type="text/javascript"></script>
    <script src="./js/snake.js" type="text/javascript"></script>
    <script src="./js/socket.js" type="text/javascript"></script>
    <script>
        var socket = glue();
        initializeCanvas();
        initializeSocket(socket);
        initializeKeypresses();

        function strangerClick(){
            document.getElementById("page1").remove();
            updateStatus("connecting...")
            console.log("now connecting to stranger");
            socket.send("stranger");
        }

        function friendClick(){
            document.getElementById("page1").remove();
            updateState("Creating game at [address]")
            console.log("TODO")
            socket.send("friend");
        }

        function updateStatus(status){
            document.getElementById("status").innerHTML = "<p>" + status + "</p>";
        }

        function initializeKeypresses(){
            window.addEventListener('keydown', function(event) {
                switch (event.keyCode) {
                    case 37: // Left
                        leftPress();
                        break;
                    case 38: // Up
                        upPress();
                        break;
                    case 39: // Right
                        rightPress();
                        break;
                    case 40: // Down
                        downPress();
                }
            }, false);
        }
    </script>
</body>
</html>